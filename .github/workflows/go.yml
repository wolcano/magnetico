name: Go

on: [push, pull_request, workflow_dispatch]

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:

    - name: Set up Go 1.x
      uses: actions/setup-go@v2
      with:
        go-version: ^1.15

    - name: Check out code into the Go module directory
      uses: actions/checkout@v2

    - name: Install go-bindata
      run: |
        go get -u -v github.com/kevinburke/go-bindata/...

    - name: Build
      run: |
        #echo "a"
        #cd cmd
        #echo "*mod tidy"
        #go mod tidy
        #echo "*mod tidy -e"
        #go mod tidy -e
        #echo "*get"
        #go get -t .
        #cd -
        echo "b"
        cd cmd/magneticod
        go mod tidy 
        go mod tidy -e
        go get -t .
        cd -
        echo "c"
        make magneticod
        # make magneticow

    #- name: Test
    #  run: |
    #    make test

    #- name: Lint
    #  run: |
    #    make staticcheck

    #- name: Check Formatting
    #  run: |
    #    make check-formatting
